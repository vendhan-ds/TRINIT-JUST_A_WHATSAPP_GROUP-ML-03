{"version":3,"sources":["../node_modules/dom-to-image-more/src/dom-to-image-more.js","../node_modules/file-saver/dist/FileSaver.min.js","../src/SimpleMapScreenshoter.js","../src/bootstrap.js","src/index.js"],"names":["global","toSvg","node","options","applyOptions","clone","bgcolor","style","backgroundColor","width","height","Object","keys","forEach","property","copyOptions","Promise","resolve","then","cloneNode","filter","embedFonts","inlineImages","makeSvgDataUri","util","toPixelData","draw","canvas","getContext","getImageData","data","toPng","toDataURL","toJpeg","quality","toBlob","canvasToBlob","toCanvas","domtoimage","impl","imagePlaceholder","defaultOptions","cacheBust","useCredentials","domNode","newCanvas","scale","document","createElement","ctx","fillStyle","fillRect","makeImage","delay","image","drawImage","root","makeNodeCopy","HTMLCanvasElement","cloneChildren","original","children","childNodes","length","parent","done","child","childClone","appendChild","asArray","processClone","cloneStyle","source","target","cssText","font","name","setProperty","getPropertyValue","getPropertyPriority","window","getComputedStyle","clonePseudoElements","clonePseudoElement","element","content","className","uid","currentClass","getAttribute","setAttribute","styleElement","selector","formatProperty","map","join","createTextNode","copyUserInput","HTMLTextAreaElement","innerHTML","value","HTMLInputElement","fixSvg","SVGElement","SVGRectElement","attribute","Element","fontFaces","resolveAll","styleNode","images","inlineAll","XMLSerializer","serializeToString","escapeXhtml","xhtml","foreignObject","svg","mimes","WOFF","woff","woff2","ttf","eot","png","jpg","jpeg","gif","tiff","parseExtension","url","match","exec","mimeType","extension","toLowerCase","isDataUrl","search","binaryString","atob","split","binaryArray","Uint8Array","i","charCodeAt","Blob","type","resolveUrl","baseUrl","doc","implementation","createHTMLDocument","base","head","a","body","href","uri","reject","Image","crossOrigin","onload","onerror","src","getAndEncode","TIMEOUT","test","Date","getTime","request","readyState","status","placeholder","fail","encoder","FileReader","onloadend","result","readAsDataURL","response","timeout","message","console","error","XMLHttpRequest","onreadystatechange","ontimeout","responseType","withCredentials","open","send","dataAsUrl","escape","string","replace","ms","arg","setTimeout","arrayLike","array","push","leftBorder","px","rightBorder","scrollWidth","topBorder","bottomBorder","scrollHeight","styleProperty","parseFloat","index","Math","random","pow","toString","slice","inliner","shouldProcess","URL_REGEX","readUrls","inline","get","urlAsRegex","RegExp","dataUrl","urls","readAll","webFonts","all","webFont","cssStrings","selectWebFontRules","cssRules","rule","CSSRule","FONT_FACE_RULE","getCssRules","styleSheets","sheet","hasOwnProperty","bind","e","log","newWebFont","webFontRule","parentStyleSheet","rules","newImage","background","inlined","HTMLImageElement","undefined","module","b","this","autoBom","warn","c","d","dispatchEvent","MouseEvent","createEvent","initMouseEvent","f","self","saveAs","HTMLAnchorElement","prototype","g","h","URL","webkitURL","j","download","rel","origin","location","createObjectURL","revokeObjectURL","navigator","msSaveOrOpenBlob","title","innerText","HTMLElement","safari","userAgent","k","l","SimpleMapScreenshoter","L","Control","extend","_container","DomUtil","create","_link","_screenState","hidden","_addScreenBtn","format","sreenOptions","opt","promise","_map","fire","_setElementsVisible","_getPixelData","_this","_toCanvas","pixels","_canvasToImage","_canvasToBlob","catch","isVisible","hideElementsWithSelectors","els","_this2","querySelectorAll","opacity","indexOf","Error","blob","captionOffset","caption","captionFontSize","captionFont","captionColor","captionBgColor","_node","screenHeight","screenWidth","imageData","createImageData","putImageData","transformedCanvas","transformedCanvasCtx","minY","minX","cropImageByInnerWH","pixelAtXYOffset","debugY","debugX","emptyYLine","emptyCountOnHorizontal","y","x","minMaxY","_getMinAndMaxOnValuesBreak","min","maxX","maxY","max","emptyXLine","emptyCountOnVertical","minMaxX","debugMode","onCropBorderSize","captionTxt","call","beginPath","rect","fill","save","fillText","arr","hasBreak","domtoimageOptions","_getPixelDataOfNormalMap","_this3","_getPixelDataOfBigMap","getContainer","mapPane","getPane","clientWidth","clientHeight","overflow","restoreMapPane","r","_this4","onPixelDataFail","_addCss","DomEvent","addListener","_onScreenBtn","disableClickPropagation","css","iconUrl","getElementsByTagName","preventDownload","takeScreen","screenName","_this5","simpleMapScreenshoter","_leafletSimpleMapScreenshoter","require","mapOptions","center","lat","lng","zoom","createPane","baselayer","tileLayer","maxZoom","subdomains","pane","addTo","snapshotOptions","screenshotter","takeScreenShot","imageSize","topLeft","img","imageurl","resultantImage","generative","querySelector","reader","base64String","button","getElementById","disabled","fetch","method","headers","JSON","stringify","json","para","br","check","checked","alert","addEventListener"],"mappings":"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","file":"src.a2b27638.js","sourceRoot":"..","sourcesContent":["(function(global) {\n    'use strict';\n\n    var util = newUtil();\n    var inliner = newInliner();\n    var fontFaces = newFontFaces();\n    var images = newImages();\n\n    // Default impl options\n    var defaultOptions = {\n        // Default is to fail on error, no placeholder\n        imagePlaceholder: undefined,\n        // Default cache bust is false, it will use the cache\n        cacheBust: false,\n        // Use (existing) authentication credentials for external URIs (CORS requests)\n        useCredentials: false\n    };\n\n    var domtoimage = {\n        toSvg: toSvg,\n        toPng: toPng,\n        toJpeg: toJpeg,\n        toBlob: toBlob,\n        toPixelData: toPixelData,\n        toCanvas: toCanvas,\n        impl: {\n            fontFaces: fontFaces,\n            images: images,\n            util: util,\n            inliner: inliner,\n            options: {}\n        }\n    };\n\n    if (typeof exports === \"object\" && typeof module === \"object\")\n        module.exports = domtoimage;\n    else\n        global.domtoimage = domtoimage;\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options\n     * @param {Function} options.filter - Should return true if passed node should be included in the output\n     *          (excluding node means excluding it's children as well). Not called on the root node.\n     * @param {String} options.bgcolor - color for the background, any valid CSS color value.\n     * @param {Number} options.width - width to be applied to node before rendering.\n     * @param {Number} options.height - height to be applied to node before rendering.\n     * @param {Object} options.style - an object whose properties to be copied to node's style before rendering.\n     * @param {Number} options.quality - a Number between 0 and 1 indicating image quality (applicable to JPEG only),\n                defaults to 1.0.\n     * @param {Number} options.scale - a Number multiplier to scale up the canvas before rendering to reduce fuzzy images, defaults to 1.0.\n     * @param {String} options.imagePlaceholder - dataURL to use as a placeholder for failed images, default behaviour is to fail fast on images we can't fetch\n     * @param {Boolean} options.cacheBust - set to true to cache bust by appending the time to the request url\n     * @return {Promise} - A promise that is fulfilled with a SVG image data URL\n     * */\n    function toSvg(node, options) {\n        options = options || {};\n        copyOptions(options);\n        return Promise.resolve(node)\n            .then(function(node) {\n                return cloneNode(node, options.filter, true);\n            })\n            .then(embedFonts)\n            .then(inlineImages)\n            .then(applyOptions)\n            .then(function(clone) {\n                return makeSvgDataUri(clone,\n                    options.width || util.width(node),\n                    options.height || util.height(node)\n                );\n            });\n\n        function applyOptions(clone) {\n            if (options.bgcolor) clone.style.backgroundColor = options.bgcolor;\n            if (options.width) clone.style.width = options.width + 'px';\n            if (options.height) clone.style.height = options.height + 'px';\n\n            if (options.style)\n                Object.keys(options.style).forEach(function(property) {\n                    clone.style[property] = options.style[property];\n                });\n\n            return clone;\n        }\n    }\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options, @see {@link toSvg}\n     * @return {Promise} - A promise that is fulfilled with a Uint8Array containing RGBA pixel data.\n     * */\n    function toPixelData(node, options) {\n        return draw(node, options || {})\n            .then(function(canvas) {\n                return canvas.getContext('2d').getImageData(\n                    0,\n                    0,\n                    util.width(node),\n                    util.height(node)\n                ).data;\n            });\n    }\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options, @see {@link toSvg}\n     * @return {Promise} - A promise that is fulfilled with a PNG image data URL\n     * */\n    function toPng(node, options) {\n        return draw(node, options || {})\n            .then(function(canvas) {\n                return canvas.toDataURL();\n            });\n    }\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options, @see {@link toSvg}\n     * @return {Promise} - A promise that is fulfilled with a JPEG image data URL\n     * */\n    function toJpeg(node, options) {\n        options = options || {};\n        return draw(node, options)\n            .then(function(canvas) {\n                return canvas.toDataURL('image/jpeg', options.quality || 1.0);\n            });\n    }\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options, @see {@link toSvg}\n     * @return {Promise} - A promise that is fulfilled with a PNG image blob\n     * */\n    function toBlob(node, options) {\n        return draw(node, options || {})\n            .then(util.canvasToBlob);\n    }\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options, @see {@link toSvg}\n     * @return {Promise} - A promise that is fulfilled with a canvas object\n     * */\n    function toCanvas(node, options) {\n        return draw(node, options || {});\n    }\n\n    function copyOptions(options) {\n        // Copy options to impl options for use in impl\n        if (typeof(options.imagePlaceholder) === 'undefined') {\n            domtoimage.impl.options.imagePlaceholder = defaultOptions.imagePlaceholder;\n        } else {\n            domtoimage.impl.options.imagePlaceholder = options.imagePlaceholder;\n        }\n\n        if (typeof(options.cacheBust) === 'undefined') {\n            domtoimage.impl.options.cacheBust = defaultOptions.cacheBust;\n        } else {\n            domtoimage.impl.options.cacheBust = options.cacheBust;\n        }\n\n        if(typeof(options.useCredentials) === 'undefined') {\n            domtoimage.impl.options.useCredentials = defaultOptions.useCredentials;\n        } else {\n            domtoimage.impl.options.useCredentials = options.useCredentials;\n        }\n    }\n\n    function draw(domNode, options) {\n        return toSvg(domNode, options)\n            .then(util.makeImage)\n            .then(util.delay(100))\n            .then(function(image) {\n                var scale = typeof(options.scale) !== 'number' ? 1 : options.scale;\n                var canvas = newCanvas(domNode, scale);\n                var ctx = canvas.getContext('2d');\n                if (image) {\n                    ctx.scale(scale, scale);\n                    ctx.drawImage(image, 0, 0);\n                }\n                return canvas;\n            });\n\n        function newCanvas(domNode, scale) {\n            var canvas = document.createElement('canvas');\n            canvas.width = (options.width || util.width(domNode)) * scale;\n            canvas.height = (options.height || util.height(domNode)) * scale;\n\n            if (options.bgcolor) {\n                var ctx = canvas.getContext('2d');\n                ctx.fillStyle = options.bgcolor;\n                ctx.fillRect(0, 0, canvas.width, canvas.height);\n            }\n\n            return canvas;\n        }\n    }\n\n    function cloneNode(node, filter, root) {\n        if (!root && filter && !filter(node)) return Promise.resolve();\n\n        return Promise.resolve(node)\n            .then(makeNodeCopy)\n            .then(function(clone) {\n                return cloneChildren(node, clone, filter);\n            })\n            .then(function(clone) {\n                return processClone(node, clone);\n            });\n\n        function makeNodeCopy(node) {\n            if (node instanceof HTMLCanvasElement) return util.makeImage(node.toDataURL());\n            return node.cloneNode(false);\n        }\n\n        function cloneChildren(original, clone, filter) {\n            var children = original.childNodes;\n            if (children.length === 0) return Promise.resolve(clone);\n\n            return cloneChildrenInOrder(clone, util.asArray(children), filter)\n                .then(function() {\n                    return clone;\n                });\n\n            function cloneChildrenInOrder(parent, children, filter) {\n                var done = Promise.resolve();\n                children.forEach(function(child) {\n                    done = done\n                        .then(function() {\n                            return cloneNode(child, filter);\n                        })\n                        .then(function(childClone) {\n                            if (childClone) parent.appendChild(childClone);\n                        });\n                });\n                return done;\n            }\n        }\n\n        function processClone(original, clone) {\n            if (!(clone instanceof Element)) return clone;\n\n            return Promise.resolve()\n                .then(cloneStyle)\n                .then(clonePseudoElements)\n                .then(copyUserInput)\n                .then(fixSvg)\n                .then(function() {\n                    return clone;\n                });\n\n            function cloneStyle() {\n                copyStyle(window.getComputedStyle(original), clone.style);\n\n                function copyStyle(source, target) {\n                    if (source.cssText) {\n                        target.cssText = source.cssText;\n                        target.font = source.font; // here, we re-assign the font prop.\n                    } else copyProperties(source, target);\n\n                    function copyProperties(source, target) {\n                        util.asArray(source).forEach(function(name) {\n                            target.setProperty(\n                                name,\n                                source.getPropertyValue(name),\n                                source.getPropertyPriority(name)\n                            );\n                        });\n                    }\n                }\n            }\n\n            function clonePseudoElements() {\n                [':before', ':after'].forEach(function(element) {\n                    clonePseudoElement(element);\n                });\n\n                function clonePseudoElement(element) {\n                    var style = window.getComputedStyle(original, element);\n                    var content = style.getPropertyValue('content');\n\n                    if (content === '' || content === 'none') return;\n\n                    var className = util.uid();\n                    var currentClass = clone.getAttribute('class');\n                    if (currentClass) {\n                        clone.setAttribute('class', currentClass + ' ' + className);\n                    }\n\n                    var styleElement = document.createElement('style');\n                    styleElement.appendChild(formatPseudoElementStyle(className, element, style));\n                    clone.appendChild(styleElement);\n\n                    function formatPseudoElementStyle(className, element, style) {\n                        var selector = '.' + className + ':' + element;\n                        var cssText = style.cssText ? formatCssText(style) : formatCssProperties(style);\n                        return document.createTextNode(selector + '{' + cssText + '}');\n\n                        function formatCssText(style) {\n                            var content = style.getPropertyValue('content');\n                            return style.cssText + ' content: ' + content + ';';\n                        }\n\n                        function formatCssProperties(style) {\n\n                            return util.asArray(style)\n                                .map(formatProperty)\n                                .join('; ') + ';';\n\n                            function formatProperty(name) {\n                                return name + ': ' +\n                                    style.getPropertyValue(name) +\n                                    (style.getPropertyPriority(name) ? ' !important' : '');\n                            }\n                        }\n                    }\n                }\n            }\n\n            function copyUserInput() {\n                if (original instanceof HTMLTextAreaElement) clone.innerHTML = original.value;\n                if (original instanceof HTMLInputElement) clone.setAttribute(\"value\", original.value);\n            }\n\n            function fixSvg() {\n                if (!(clone instanceof SVGElement)) return;\n                clone.setAttribute('xmlns', 'http://www.w3.org/2000/svg');\n\n                if (!(clone instanceof SVGRectElement)) return;\n                ['width', 'height'].forEach(function(attribute) {\n                    var value = clone.getAttribute(attribute);\n                    if (!value) return;\n\n                    clone.style.setProperty(attribute, value);\n                });\n            }\n        }\n    }\n\n    function embedFonts(node) {\n        return fontFaces.resolveAll()\n            .then(function(cssText) {\n                var styleNode = document.createElement('style');\n                node.appendChild(styleNode);\n                styleNode.appendChild(document.createTextNode(cssText));\n                return node;\n            });\n    }\n\n    function inlineImages(node) {\n        return images.inlineAll(node)\n            .then(function() {\n                return node;\n            });\n    }\n\n    function makeSvgDataUri(node, width, height) {\n        return Promise.resolve(node)\n            .then(function(node) {\n                node.setAttribute('xmlns', 'http://www.w3.org/1999/xhtml');\n                return new XMLSerializer().serializeToString(node);\n            })\n            .then(util.escapeXhtml)\n            .then(function(xhtml) {\n                return '<foreignObject x=\"0\" y=\"0\" width=\"100%\" height=\"100%\">' + xhtml + '</foreignObject>';\n            })\n            .then(function(foreignObject) {\n                return '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"' + width + '\" height=\"' + height + '\">' +\n                    foreignObject + '</svg>';\n            })\n            .then(function(svg) {\n                return 'data:image/svg+xml;charset=utf-8,' + svg;\n            });\n    }\n\n    function newUtil() {\n        return {\n            escape: escape,\n            parseExtension: parseExtension,\n            mimeType: mimeType,\n            dataAsUrl: dataAsUrl,\n            isDataUrl: isDataUrl,\n            canvasToBlob: canvasToBlob,\n            resolveUrl: resolveUrl,\n            getAndEncode: getAndEncode,\n            uid: uid(),\n            delay: delay,\n            asArray: asArray,\n            escapeXhtml: escapeXhtml,\n            makeImage: makeImage,\n            width: width,\n            height: height\n        };\n\n        function mimes() {\n            /*\n             * Only WOFF and EOT mime types for fonts are 'real'\n             * see http://www.iana.org/assignments/media-types/media-types.xhtml\n             */\n            var WOFF = 'application/font-woff';\n            var JPEG = 'image/jpeg';\n\n            return {\n                'woff': WOFF,\n                'woff2': WOFF,\n                'ttf': 'application/font-truetype',\n                'eot': 'application/vnd.ms-fontobject',\n                'png': 'image/png',\n                'jpg': JPEG,\n                'jpeg': JPEG,\n                'gif': 'image/gif',\n                'tiff': 'image/tiff',\n                'svg': 'image/svg+xml'\n            };\n        }\n\n        function parseExtension(url) {\n            var match = /\\.([^\\.\\/]*?)(\\?|$)/g.exec(url);\n            if (match) return match[1];\n            else return '';\n        }\n\n        function mimeType(url) {\n            var extension = parseExtension(url).toLowerCase();\n            return mimes()[extension] || '';\n        }\n\n        function isDataUrl(url) {\n            return url.search(/^(data:)/) !== -1;\n        }\n\n        function toBlob(canvas) {\n            return new Promise(function(resolve) {\n                var binaryString = window.atob(canvas.toDataURL().split(',')[1]);\n                var length = binaryString.length;\n                var binaryArray = new Uint8Array(length);\n\n                for (var i = 0; i < length; i++)\n                    binaryArray[i] = binaryString.charCodeAt(i);\n\n                resolve(new Blob([binaryArray], {\n                    type: 'image/png'\n                }));\n            });\n        }\n\n        function canvasToBlob(canvas) {\n            if (canvas.toBlob)\n                return new Promise(function(resolve) {\n                    canvas.toBlob(resolve);\n                });\n\n            return toBlob(canvas);\n        }\n\n        function resolveUrl(url, baseUrl) {\n            var doc = document.implementation.createHTMLDocument();\n            var base = doc.createElement('base');\n            doc.head.appendChild(base);\n            var a = doc.createElement('a');\n            doc.body.appendChild(a);\n            base.href = baseUrl;\n            a.href = url;\n            return a.href;\n        }\n\n        function uid() {\n            var index = 0;\n\n            return function() {\n                return 'u' + fourRandomChars() + index++;\n\n                function fourRandomChars() {\n                    /* see http://stackoverflow.com/a/6248722/2519373 */\n                    return ('0000' + (Math.random() * Math.pow(36, 4) << 0).toString(36)).slice(-4);\n                }\n            };\n        }\n\n        function makeImage(uri) {\n            if (uri === 'data:,') return Promise.resolve();\n            return new Promise(function(resolve, reject) {\n                var image = new Image();\n                if(domtoimage.impl.options.useCredentials) {\n                    image.crossOrigin = 'use-credentials';\n                }\n                image.onload = function() {\n                    resolve(image);\n                };\n                image.onerror = reject;\n                image.src = uri;\n            });\n        }\n\n        function getAndEncode(url) {\n            var TIMEOUT = 30000;\n            if (domtoimage.impl.options.cacheBust) {\n                // Cache bypass so we dont have CORS issues with cached images\n                // Source: https://developer.mozilla.org/en/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest#Bypassing_the_cache\n                url += ((/\\?/).test(url) ? \"&\" : \"?\") + (new Date()).getTime();\n            }\n\n            return new Promise(function(resolve) {\n                var request = new XMLHttpRequest();\n\n                request.onreadystatechange = done;\n                request.ontimeout = timeout;\n                request.responseType = 'blob';\n                request.timeout = TIMEOUT;\n                if(domtoimage.impl.options.useCredentials) {\n                    request.withCredentials = true;\n                }\n                request.open('GET', url, true);\n                request.send();\n\n                var placeholder;\n                if (domtoimage.impl.options.imagePlaceholder) {\n                    var split = domtoimage.impl.options.imagePlaceholder.split(/,/);\n                    if (split && split[1]) {\n                        placeholder = split[1];\n                    }\n                }\n\n                function done() {\n                    if (request.readyState !== 4) return;\n\n                    if (request.status !== 200) {\n                        if (placeholder) {\n                            resolve(placeholder);\n                        } else {\n                            fail('cannot fetch resource: ' + url + ', status: ' + request.status);\n                        }\n\n                        return;\n                    }\n\n                    var encoder = new FileReader();\n                    encoder.onloadend = function() {\n                        var content = encoder.result.split(/,/)[1];\n                        resolve(content);\n                    };\n                    encoder.readAsDataURL(request.response);\n                }\n\n                function timeout() {\n                    if (placeholder) {\n                        resolve(placeholder);\n                    } else {\n                        fail('timeout of ' + TIMEOUT + 'ms occured while fetching resource: ' + url);\n                    }\n                }\n\n                function fail(message) {\n                    console.error(message);\n                    resolve('');\n                }\n            });\n        }\n\n        function dataAsUrl(content, type) {\n            return 'data:' + type + ';base64,' + content;\n        }\n\n        function escape(string) {\n            return string.replace(/([.*+?^${}()|\\[\\]\\/\\\\])/g, '\\\\$1');\n        }\n\n        function delay(ms) {\n            return function(arg) {\n                return new Promise(function(resolve) {\n                    setTimeout(function() {\n                        resolve(arg);\n                    }, ms);\n                });\n            };\n        }\n\n        function asArray(arrayLike) {\n            var array = [];\n            var length = arrayLike.length;\n            for (var i = 0; i < length; i++) array.push(arrayLike[i]);\n            return array;\n        }\n\n        function escapeXhtml(string) {\n            return string.replace(/#/g, '%23').replace(/\\n/g, '%0A');\n        }\n\n        function width(node) {\n            var leftBorder = px(node, 'border-left-width');\n            var rightBorder = px(node, 'border-right-width');\n            return node.scrollWidth + leftBorder + rightBorder;\n        }\n\n        function height(node) {\n            var topBorder = px(node, 'border-top-width');\n            var bottomBorder = px(node, 'border-bottom-width');\n            return node.scrollHeight + topBorder + bottomBorder;\n        }\n\n        function px(node, styleProperty) {\n            var value = window.getComputedStyle(node).getPropertyValue(styleProperty);\n            return parseFloat(value.replace('px', ''));\n        }\n    }\n\n    function newInliner() {\n        var URL_REGEX = /url\\(['\"]?([^'\"]+?)['\"]?\\)/g;\n\n        return {\n            inlineAll: inlineAll,\n            shouldProcess: shouldProcess,\n            impl: {\n                readUrls: readUrls,\n                inline: inline\n            }\n        };\n\n        function shouldProcess(string) {\n            return string.search(URL_REGEX) !== -1;\n        }\n\n        function readUrls(string) {\n            var result = [];\n            var match;\n            while ((match = URL_REGEX.exec(string)) !== null) {\n                result.push(match[1]);\n            }\n            return result.filter(function(url) {\n                return !util.isDataUrl(url);\n            });\n        }\n\n        function inline(string, url, baseUrl, get) {\n            return Promise.resolve(url)\n                .then(function(url) {\n                    return baseUrl ? util.resolveUrl(url, baseUrl) : url;\n                })\n                .then(get || util.getAndEncode)\n                .then(function(data) {\n                    return util.dataAsUrl(data, util.mimeType(url));\n                })\n                .then(function(dataUrl) {\n                    return string.replace(urlAsRegex(url), '$1' + dataUrl + '$3');\n                });\n\n            function urlAsRegex(url) {\n                return new RegExp('(url\\\\([\\'\"]?)(' + util.escape(url) + ')([\\'\"]?\\\\))', 'g');\n            }\n        }\n\n        function inlineAll(string, baseUrl, get) {\n            if (nothingToInline()) return Promise.resolve(string);\n\n            return Promise.resolve(string)\n                .then(readUrls)\n                .then(function(urls) {\n                    var done = Promise.resolve(string);\n                    urls.forEach(function(url) {\n                        done = done.then(function(string) {\n                            return inline(string, url, baseUrl, get);\n                        });\n                    });\n                    return done;\n                });\n\n            function nothingToInline() {\n                return !shouldProcess(string);\n            }\n        }\n    }\n\n    function newFontFaces() {\n        return {\n            resolveAll: resolveAll,\n            impl: {\n                readAll: readAll\n            }\n        };\n\n        function resolveAll() {\n            return readAll(document)\n                .then(function(webFonts) {\n                    return Promise.all(\n                        webFonts.map(function(webFont) {\n                            return webFont.resolve();\n                        })\n                    );\n                })\n                .then(function(cssStrings) {\n                    return cssStrings.join('\\n');\n                });\n        }\n\n        function readAll() {\n            return Promise.resolve(util.asArray(document.styleSheets))\n                .then(getCssRules)\n                .then(selectWebFontRules)\n                .then(function(rules) {\n                    return rules.map(newWebFont);\n                });\n\n            function selectWebFontRules(cssRules) {\n                return cssRules\n                    .filter(function(rule) {\n                        return rule.type === CSSRule.FONT_FACE_RULE;\n                    })\n                    .filter(function(rule) {\n                        return inliner.shouldProcess(rule.style.getPropertyValue('src'));\n                    });\n            }\n\n            function getCssRules(styleSheets) {\n                var cssRules = [];\n                styleSheets.forEach(function(sheet) {\n                    if (sheet.hasOwnProperty(\"cssRules\")) {\n                        try {\n                            util.asArray(sheet.cssRules || []).forEach(cssRules.push.bind(cssRules));\n                        } catch (e) {\n                            console.log('Error while reading CSS rules from ' + sheet.href, e.toString());\n                        }\n                    }\n                });\n                return cssRules;\n            }\n\n            function newWebFont(webFontRule) {\n                return {\n                    resolve: function resolve() {\n                        var baseUrl = (webFontRule.parentStyleSheet || {}).href;\n                        return inliner.inlineAll(webFontRule.cssText, baseUrl);\n                    },\n                    src: function() {\n                        return webFontRule.style.getPropertyValue('src');\n                    }\n                };\n            }\n        }\n    }\n\n    function newImages() {\n        return {\n            inlineAll: inlineAll,\n            impl: {\n                newImage: newImage\n            }\n        };\n\n        function newImage(element) {\n            return {\n                inline: inline\n            };\n\n            function inline(get) {\n                if (util.isDataUrl(element.src)) return Promise.resolve();\n\n                return Promise.resolve(element.src)\n                    .then(get || util.getAndEncode)\n                    .then(function(data) {\n                        return util.dataAsUrl(data, util.mimeType(element.src));\n                    })\n                    .then(function(dataUrl) {\n                        return new Promise(function(resolve, reject) {\n                            element.onload = resolve;\n                            // for any image with invalid src(such as <img src />), just ignore it\n                            element.onerror = resolve;\n                            element.src = dataUrl;\n                        });\n                    });\n            }\n        }\n\n        function inlineAll(node) {\n            if (!(node instanceof Element)) return Promise.resolve(node);\n\n            return inlineBackground(node)\n                .then(function() {\n                    if (node instanceof HTMLImageElement)\n                        return newImage(node).inline();\n                    else\n                        return Promise.all(\n                            util.asArray(node.childNodes).map(function(child) {\n                                return inlineAll(child);\n                            })\n                        );\n                });\n\n            function inlineBackground(node) {\n                var background = node.style.getPropertyValue('background');\n\n                if (!background) return Promise.resolve(node);\n\n                return inliner.inlineAll(background)\n                    .then(function(inlined) {\n                        node.style.setProperty(\n                            'background',\n                            inlined,\n                            node.style.getPropertyPriority('background')\n                        );\n                    })\n                    .then(function() {\n                        return node;\n                    });\n            }\n        }\n    }\n})(this);\n","(function(a,b){if(\"function\"==typeof define&&define.amd)define([],b);else if(\"undefined\"!=typeof exports)b();else{b(),a.FileSaver={exports:{}}.exports}})(this,function(){\"use strict\";function b(a,b){return\"undefined\"==typeof b?b={autoBom:!1}:\"object\"!=typeof b&&(console.warn(\"Deprecated: Expected third argument to be a object\"),b={autoBom:!b}),b.autoBom&&/^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(a.type)?new Blob([\"\\uFEFF\",a],{type:a.type}):a}function c(b,c,d){var e=new XMLHttpRequest;e.open(\"GET\",b),e.responseType=\"blob\",e.onload=function(){a(e.response,c,d)},e.onerror=function(){console.error(\"could not download file\")},e.send()}function d(a){var b=new XMLHttpRequest;b.open(\"HEAD\",a,!1);try{b.send()}catch(a){}return 200<=b.status&&299>=b.status}function e(a){try{a.dispatchEvent(new MouseEvent(\"click\"))}catch(c){var b=document.createEvent(\"MouseEvents\");b.initMouseEvent(\"click\",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(b)}}var f=\"object\"==typeof window&&window.window===window?window:\"object\"==typeof self&&self.self===self?self:\"object\"==typeof global&&global.global===global?global:void 0,a=f.saveAs||(\"object\"!=typeof window||window!==f?function(){}:\"download\"in HTMLAnchorElement.prototype?function(b,g,h){var i=f.URL||f.webkitURL,j=document.createElement(\"a\");g=g||b.name||\"download\",j.download=g,j.rel=\"noopener\",\"string\"==typeof b?(j.href=b,j.origin===location.origin?e(j):d(j.href)?c(b,g,h):e(j,j.target=\"_blank\")):(j.href=i.createObjectURL(b),setTimeout(function(){i.revokeObjectURL(j.href)},4E4),setTimeout(function(){e(j)},0))}:\"msSaveOrOpenBlob\"in navigator?function(f,g,h){if(g=g||f.name||\"download\",\"string\"!=typeof f)navigator.msSaveOrOpenBlob(b(f,h),g);else if(d(f))c(f,g,h);else{var i=document.createElement(\"a\");i.href=f,i.target=\"_blank\",setTimeout(function(){e(i)})}}:function(a,b,d,e){if(e=e||open(\"\",\"_blank\"),e&&(e.document.title=e.document.body.innerText=\"downloading...\"),\"string\"==typeof a)return c(a,b,d);var g=\"application/octet-stream\"===a.type,h=/constructor/i.test(f.HTMLElement)||f.safari,i=/CriOS\\/[\\d]+/.test(navigator.userAgent);if((i||g&&h)&&\"object\"==typeof FileReader){var j=new FileReader;j.onloadend=function(){var a=j.result;a=i?a:a.replace(/^data:[^;]*;/,\"data:attachment/file;\"),e?e.location.href=a:location=a,e=null},j.readAsDataURL(a)}else{var k=f.URL||f.webkitURL,l=k.createObjectURL(a);e?e.location=l:location.href=l,e=null,setTimeout(function(){k.revokeObjectURL(l)},4E4)}});f.saveAs=a.saveAs=a,\"undefined\"!=typeof module&&(module.exports=a)});\n\n//# sourceMappingURL=FileSaver.min.js.map","/* global L */\nimport domtoimage from 'dom-to-image-more'\nimport fileSaver from 'file-saver'\n\nexport const STATUS_READY = 1\nexport const STATUS_PENDING = 2\nexport const ICON_SVG_BASE64 = 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDMyIDMyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzMiAzMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxnPjxnIGlkPSJjYW1lcmEiPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsOS41MDFjLTQuNDE5LDAtOCwzLjU4MS04LDhjMCw0LjQxOCwzLjU4MSw4LDgsOGM0LjQxOCwwLDgtMy41ODIsOC04UzIwLjQxOCw5LjUwMSwxNiw5LjUwMXogTTIwLjU1NSwyMS40MDZjLTIuMTU2LDIuNTE2LTUuOTQzLDIuODA3LTguNDU5LDAuNjVjLTIuNTE3LTIuMTU2LTIuODA3LTUuOTQ0LTAuNjUtOC40NTljMi4xNTUtMi41MTcsNS45NDMtMi44MDcsOC40NTktMC42NUMyMi40MiwxNS4xMDIsMjIuNzExLDE4Ljg5MSwyMC41NTUsMjEuNDA2eiIvPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsMTMuNTAxYy0yLjIwOSwwLTMuOTk5LDEuNzkxLTQsMy45OTl2MC4wMDJjMCwwLjI3NSwwLjIyNCwwLjUsMC41LDAuNXMwLjUtMC4yMjUsMC41LTAuNVYxNy41YzAuMDAxLTEuNjU2LDEuMzQzLTIuOTk5LDMtMi45OTljMC4yNzYsMCwwLjUtMC4yMjQsMC41LTAuNVMxNi4yNzYsMTMuNTAxLDE2LDEzLjUwMXoiLz48cGF0aCBzdHlsZT0iZmlsbDojMDEwMDAyOyIgZD0iTTI5LjQ5Miw4LjU0MmwtNC4zMzQtMC43MjNsLTEuMzczLTMuNDM0QzIzLjMyNiwzLjI0LDIyLjIzMiwyLjUsMjEsMi41SDExYy0xLjIzMiwwLTIuMzI2LDAuNzQtMi43ODYsMS44ODZMNi44NDIsNy44MTlMMi41MDksOC41NDJDMS4wNTUsOC43ODMsMCwxMC4wMjcsMCwxMS41djE1YzAsMS42NTQsMS4zNDYsMywzLDNoMjZjMS42NTQsMCwzLTEuMzQ2LDMtM3YtMTVDMzIsMTAuMDI3LDMwLjk0NSw4Ljc4MywyOS40OTIsOC41NDJ6IE0zMCwyNi41YzAsMC41NTMtMC40NDcsMS0xLDFIM2MtMC41NTMsMC0xLTAuNDQ3LTEtMXYtMTVjMC0wLjQ4OSwwLjM1NC0wLjkwNiwwLjgzNi0wLjk4Nkw4LjI4LDkuNjA3bDEuNzkxLTQuNDc4QzEwLjIyNCw0Ljc1LDEwLjU5MSw0LjUsMTEsNC41aDEwYzAuNDA4LDAsMC43NzUsMC4yNDksMC45MjgsMC42MjlsMS43OTEsNC40NzhsNS40NDUsMC45MDdDMjkuNjQ2LDEwLjU5NCwzMCwxMS4wMTEsMzAsMTEuNVYyNi41eiIvPjwvZz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+'\n\nexport const SimpleMapScreenshoter = L.Control.extend({\n    options: {\n        cropImageByInnerWH: true,\n        hidden: false,\n        domtoimageOptions: {},\n        position: 'topleft',\n        screenName: 'screen',\n        iconUrl: ICON_SVG_BASE64,\n        hideElementsWithSelectors: [\n            '.leaflet-control-container'\n        ],\n        onCropBorderSize: 2,\n        caption: null,\n        captionFontSize: 15,\n        captionFont: 'Arial',\n        captionColor: 'black',\n        captionBgColor: 'white',\n        captionOffset: 5,\n        mimeType: 'image/png',\n        debugMode: false,\n        preventDownload: false,\n        onPixelDataFail: function ({ node, error }) {\n            console.warn(`Map node is very big ${node.scrollWidth}x${node.scrollHeight}`)\n            console.warn(`Add function: SimpleMapScreenshoter({\n              onPixelDataFail: function({ node, plugin, error, mapPane, domtoimageOptions }) {\n                 // Solutions:\n                 // decrease size of map\n                 // or decrease zoom level\n                 // or remove elements with big distanses\n                 // and after that return image in Promise - plugin._getPixelDataOfNormalMap\n                 return plugin._getPixelDataOfNormalMap(domtoimageOptions)\n              }\n            })`)\n            return Promise.reject(error)\n        }\n    },\n    onAdd () {\n        this._container = L.DomUtil.create(\n            'div',\n            'leaflet-control-simpleMapScreenshoter'\n        )\n        this._link = null\n        this._screenState = {\n            status: STATUS_READY,\n            promise: null\n        }\n        if (this.options.hidden === false) {\n            this._addScreenBtn()\n        }\n        return this._container\n    },\n    /**\n     * @param format {string} blob or png\n     * @param sreenOptions {Object}\n     * @returns {Promise<Blob>|Promise<Base64>} Blob or png image\n     */\n    takeScreen (format = 'blob', sreenOptions = {}) {\n        const options = {}\n        for (let opt in this.options) {\n            if (sreenOptions.hasOwnProperty(opt)) {\n                options[opt] = sreenOptions[opt]\n            } else {\n                options[opt] = this.options[opt]\n            }\n        }\n        if (this._screenState.status === STATUS_PENDING) {\n            return this._screenState.promise\n        }\n        this._map.fire('simpleMapScreenshoter.takeScreen')\n        this._screenState.status = STATUS_PENDING\n        this._setElementsVisible(false)\n        this._screenState.promise = this._getPixelData(options)\n            .then(pixels => {\n                this._setElementsVisible(true)\n                return this._toCanvas(pixels, options)\n            })\n            .then(canvas => {\n                if (format === 'image') {\n                    return this._canvasToImage(canvas, options)\n                } else if (format === 'canvas') {\n                    return canvas\n                }\n                return this._canvasToBlob(canvas)\n            })\n            .then(image => {\n                this._screenState.status = STATUS_READY\n                this._map.fire('simpleMapScreenshoter.done')\n                return image\n            }).catch(e => {\n                this._setElementsVisible(true)\n                this._screenState.status = STATUS_READY\n                this._map.fire('simpleMapScreenshoter.error', {e})\n                return Promise.reject(e)\n            })\n        return this._screenState.promise\n    },\n    /**\n     * @param isVisible\n     * @private\n     */\n    _setElementsVisible (isVisible = false) {\n        this.options.hideElementsWithSelectors.forEach(selector => {\n            const els = this._map._container.querySelectorAll(selector)\n            for (let el of els) {\n                el.style.opacity = isVisible === false\n                    ? 0\n                    : 1\n            }\n        })\n    },\n    /**\n     * @param canvas\n     * @param mimeType\n     * @returns {Promise<Base64>}\n     * @private\n     */\n    _canvasToImage (canvas, {mimeType}) {\n        const image = canvas.toDataURL(mimeType)\n        if (image.indexOf('base64') === -1) {\n            return Promise.reject(new Error('Base64 image generation error'))\n        }\n        return Promise.resolve(image)\n    },\n    /**\n     * @param canvas {Canvas}\n     * @returns {Promise<Blob>}\n     * @private\n     */\n    _canvasToBlob (canvas) {\n        return new Promise((resolve, reject) => {\n            canvas.toBlob(blob => {\n                resolve(blob)\n            }, 'image/png')\n        })\n    },\n    /**\n     * @param pixels {Uint8Array}\n     * @param options {Object}\n     * @returns {Promise<Canvas>}\n     * @private\n     */\n    _toCanvas (pixels, options) {\n        let {captionOffset, caption, captionFontSize, captionFont, captionColor, captionBgColor} = options\n        let {screenHeight, screenWidth} = this._node\n        let canvas = document.createElement('canvas')\n        canvas.width = screenWidth\n        canvas.height = screenHeight\n\n        let ctx = canvas.getContext('2d')\n        let imageData = ctx.createImageData(screenWidth, screenHeight)\n        for (let i = 0; i < pixels.length; ++i) {\n            imageData.data[i] = pixels[i]\n        }\n        ctx.putImageData(imageData, 0, 0)\n        imageData = null\n\n        let transformedCanvas = document.createElement('canvas')\n        let transformedCanvasCtx = transformedCanvas.getContext('2d')\n        let minY = 0\n        let minX = 0\n        let height = screenHeight\n        let width = screenWidth\n\n        // crop blank opacity from image borders\n        if (this.options.cropImageByInnerWH === true) {\n            let pixelAtXYOffset = 0\n\n            let debugY = {}\n            let debugX = {}\n\n            let emptyYLine = []\n            let emptyCountOnHorizontal = 0\n            for (let y = 0; y < screenHeight; ++y) {\n                emptyCountOnHorizontal = 0\n                for (let x = 0; x < screenWidth; ++x) {\n                    pixelAtXYOffset = (4 * y * screenWidth) + (4 * x)\n                    // find opacity = 0 on horizontal\n                    if (pixels[pixelAtXYOffset + 4] === 0) {\n                        emptyCountOnHorizontal++\n                    }\n                    /* if (y === Math.round(screenHeight / 2)) {\n                        debugY[x] = pixels.slice(pixelAtXYOffset, pixelAtXYOffset + 4)\n                    } */\n                }\n                // save empty horizontal\n                if (emptyCountOnHorizontal === screenWidth) {\n                    emptyYLine.push(y)\n                }\n            }\n            const minMaxY = this._getMinAndMaxOnValuesBreak(emptyYLine)\n            minY = minMaxY.min\n            let maxX = screenWidth\n            let maxY = minMaxY.max\n\n            let emptyXLine = []\n            let emptyCountOnVertical = 0\n            for (let x = minX; x < maxX; ++x) {\n                emptyCountOnVertical = 0\n                for (let y = 0; y < screenHeight; ++y) {\n                    pixelAtXYOffset = (4 * y * screenWidth) + (4 * x)\n                    // find opacity = 0 on vertical\n                    if (pixels[pixelAtXYOffset + 4] === 0) {\n                        emptyCountOnVertical++\n                    }\n\n                    /* if (x === screenWidth - 5) {\n                        debugX[y] = pixels.slice(pixelAtXYOffset, pixelAtXYOffset + 4)\n                    } */\n                }\n                // save empty vertical\n                if (emptyCountOnVertical === screenHeight) {\n                    emptyXLine.push(x)\n                }\n            }\n            const minMaxX = this._getMinAndMaxOnValuesBreak(emptyXLine)\n            minX = minMaxX.min\n            maxX = minMaxX.max\n\n            if ((minX === 0 && maxX === 0) || maxX === null) {\n                maxX = screenWidth\n            }\n            if ((minY === 0 && maxY === 0) || maxY === null) {\n                maxY = screenHeight\n            }\n\n            if (this.options.debugMode === true) {\n                console.log('emptyYLine', emptyYLine)\n                console.log('minMaxY', minMaxY)\n                console.log('emptyXLine', emptyXLine)\n                console.log('minMaxX', minMaxX)\n                console.log('debugX', debugX)\n                console.log('debugY', debugY)\n            }\n\n            // if w/h changed, scale inner\n            if (minY !== 0 || maxY !== screenHeight || minX !== 0 || maxX !== screenWidth) {\n                minY = minY + this.options.onCropBorderSize\n                maxY = maxY - this.options.onCropBorderSize\n                minX = minX + this.options.onCropBorderSize\n                maxX = maxX - this.options.onCropBorderSize\n            }\n            height = maxY - minY\n            width = maxX - minX\n            transformedCanvas.width = width\n            transformedCanvas.height = height\n        } else {\n            transformedCanvas.width = width\n            transformedCanvas.height = height\n        }\n\n        let captionTxt = null\n        if (caption) {\n            captionTxt = typeof caption === 'function'\n                ? caption.call(this)\n                : caption\n        }\n\n        // increase size of canvas for write caption\n        if (captionTxt !== null) {\n            transformedCanvas.height = transformedCanvas.height + (captionOffset + captionFontSize + captionOffset)\n            // set bg color\n            transformedCanvasCtx.beginPath()\n            transformedCanvasCtx.rect(0, 0, transformedCanvas.width, transformedCanvas.height)\n            transformedCanvasCtx.fillStyle = captionBgColor\n            transformedCanvasCtx.fill()\n            transformedCanvasCtx.save()\n        }\n\n        transformedCanvasCtx.drawImage(canvas, minX, minY, width, height, 0, 0, width, height)\n\n        // write caption text\n        if (captionTxt !== null) {\n            transformedCanvasCtx.font = `${captionFontSize}px ${captionFont}`\n            transformedCanvasCtx.fillStyle = captionColor\n            transformedCanvasCtx.fillText(captionTxt, captionOffset, height + captionOffset + captionFontSize)\n        }\n\n        return Promise.resolve(transformedCanvas)\n    },\n    /**\n     * find break in array [0,1,2,3,40,41,42]\n     * we get 3 and 40\n     * @param arr {Array}\n     * @returns {{min: number, max: number}}\n     * @private\n     */\n    _getMinAndMaxOnValuesBreak (arr) {\n        let min = 0\n        let max = 0\n        let hasBreak = false\n        for (let i = 1; i < arr.length; i++) {\n            if (arr[i] - 1 === arr[i - 1]) {\n                min = arr[i]\n            } else {\n                max = arr[i]\n                hasBreak = true\n                break\n            }\n        }\n        // if on start no opacity, opacity may be exist on end\n        if (hasBreak === false && arr[0] > 1) {\n            min = 0\n            max = arr[0]\n            // opaciy at start\n        } else if (hasBreak === false) {\n            min = arr[arr.length - 1] || 0\n            max = null\n        }\n        return {min, max}\n    },\n    /**\n     * @param domtoimageOptions\n     * @returns {Promise<Uint8Array>}\n     * @private\n     */\n    _getPixelData ({domtoimageOptions = {}}) {\n        /**\n         * 1) we try try to get full map size screen, but we have problem of big canvas:\n         * https://stackoverflow.com/questions/6081483/maximum-size-of-a-canvas-element\n         * ie mobile - 4000\n         * ie - 8000\n         * chrome - 16000\n         * firefox - 32000\n         *\n         * 2) on error, we can create screen with hide not visible elements by css\n         * sometimes it not work, need solution\n         */\n        return this._getPixelDataOfNormalMap(domtoimageOptions).catch(e => {\n            console.warn('May be map size very big on that zoom level, we have error:', e.toString())\n            console.warn('You can manually hide map elements with large distances between them for fix that warn')\n            return this._getPixelDataOfBigMap(domtoimageOptions)\n        })\n    },\n    _getPixelDataOfNormalMap (domtoimageOptions = {}) {\n        const node = this._map.getContainer()\n\n        this._node = {\n            node,\n            screenHeight: node.scrollHeight,\n            screenWidth: node.scrollWidth\n        }\n\n        return domtoimage.toPixelData(node, domtoimageOptions)\n    },\n    _getPixelDataOfBigMap (domtoimageOptions = {}) {\n        const node = this._map.getContainer()\n\n        // fix: https://github.com/grinat/leaflet-simple-map-screenshoter/issues/7\n        // fix memory out error if map scrollHeight and scrollWidth very big\n        const mapPane = this._map.getPane('mapPane')\n\n        const increaser = 2 // <-- when window resize, map resize with translate option, we need what for prevent gray on borders\n        mapPane.style.width = `${node.clientWidth * increaser}px`\n        mapPane.style.height = `${node.clientHeight * increaser}px`\n        mapPane.style.overflow = 'hidden'\n\n        const restoreMapPane = () => {\n            mapPane.style.width = 'initial'\n            mapPane.style.height = 'initial'\n            mapPane.style.overflow = 'initial'\n        }\n\n        this._node = {\n            node,\n            screenHeight: node.scrollHeight,\n            screenWidth: node.scrollWidth\n        }\n\n        return domtoimage.toPixelData(node, domtoimageOptions).then(r => {\n            restoreMapPane()\n            return r\n        }).catch(e => {\n            restoreMapPane()\n            return this.options.onPixelDataFail({\n                plugin: this,\n                node,\n                mapPane,\n                error: e,\n                domtoimageOptions\n            })\n        })\n    },\n    /**\n     * @private\n     */\n    _addScreenBtn () {\n        this._link = L.DomUtil.create(\n            'a',\n            'leaflet-control-simpleMapScreenshoter-btn',\n            this._container\n        )\n        this._addCss()\n        L.DomEvent.addListener(this._link, 'click', this._onScreenBtn, this)\n        L.DomEvent.disableClickPropagation(this._link)\n    },\n    /**\n     * @private\n     */\n    _addCss () {\n        let css = `\n    .leaflet-control-simpleMapScreenshoter{\n       border: 2px solid rgba(0,0,0,0.2);\n       background-clip: padding-box;\n    }\n    .leaflet-control-simpleMapScreenshoter a{\n       background-color: #fff;\n       border-bottom: 1px solid #ccc;\n       width: 30px;\n       height: 30px;\n       line-height: 30px;\n       display: block;\n       text-align: center;\n       text-decoration: none;\n       color: black;\n       overflow: hidden;\n       border-radius: 2px;\n       background-image: url('${this.options.iconUrl}');\n       background-position: 46% 41%;\n       background-repeat: no-repeat;\n       background-size: 63%;\n    }\n    .leaflet-control-simpleMapScreenshoter a:hover{\n       cursor: pointer;\n    }\n    `\n        let head = document.head || document.getElementsByTagName('head')[0]\n        let style = document.createElement('style')\n        style.appendChild(\n            document.createTextNode(\n                css\n            )\n        )\n        head.appendChild(style)\n    },\n    /**\n     * @private\n     */\n    _onScreenBtn () {\n        this._map.fire('simpleMapScreenshoter.click')\n        if (this.options.preventDownload) return\n\n        this.takeScreen().then(blob => {\n            const screenName = typeof this.options.screenName === 'function'\n                ? this.options.screenName.call(this)\n                : this.options.screenName\n\n            fileSaver.saveAs(blob, `${screenName}.png`)\n        }).catch(e => {\n            this._map.fire('simpleMapScreenshoter.error', {e})\n        })\n    }\n})\n\nexport default SimpleMapScreenshoter\n","/* global L */\nimport SimpleMapScreenshoter from './SimpleMapScreenshoter'\n\n/**\n * @returns {L.Control.SimpleMapScreenshoter}\n */\nconst init = () => {\n    L.Control.SimpleMapScreenshoter = SimpleMapScreenshoter\n    L.simpleMapScreenshoter = function (options) {\n        return new L.Control.SimpleMapScreenshoter(options)\n    }\n    return SimpleMapScreenshoter\n}\n\nexport default init()\n\nexport {SimpleMapScreenshoter}\n","import { SimpleMapScreenshoter } from \"leaflet-simple-map-screenshoter\";\n\n// Define some maps options\nvar mapOptions = {\n  center: { lat: 40.7, lng: 22.8 },\n  zoom: 6\n};\n\n//Create a map and assign it to the map div\nvar map = L.map(\"leafletMapid\", mapOptions);\n\n// Create some custom panes\nmap.createPane(\"snapshot-pane\");\nmap.createPane(\"dont-include\");\n\n// Add baselayer and geojson to snapshot pane\n\n\n\nconst baselayer = L.tileLayer('http://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}',{\n        maxZoom: 20,\n        subdomains:['mt0','mt1','mt2','mt3'],\n        pane: \"snapshot-pane\"\n}).addTo(map);\n\n// Set up snapshotter\nconst snapshotOptions = {\n  hideElementsWithSelectors: [\n    \".leaflet-control-container\",\n    \".leaflet-dont-include-pane\",\n    \"#snapshot-button\"\n  ],\n  hidden: true\n};\n\n// Add screenshotter to map\nconst screenshotter = new SimpleMapScreenshoter(snapshotOptions);\nscreenshotter.addTo(map);\n\n// What happens when you clikc the \"Snapshot Greek Border\" button:\nconst takeScreenShot = () => {\n  // Get bounds of feature, pad ot a but too\n  \n  // Get the resulting image size that contains the feature\n  const imageSize = {x: 1000, y: 500};\n  const topLeft = {x: 0, y: 0};\n\n  // Set up screenshot function\n  screenshotter\n    .takeScreen(\"image\")\n    .then((image) => {\n      // Create <img> element to render img data\n\n      var img = new Image();\n      \n      // once the image loads, do the following:\n      img.onload = () => {\n        // Create canvas to process image data\n        const canvas = document.createElement(\"canvas\");\n        const ctx = canvas.getContext(\"2d\");\n\n        // Set canvas size to the size of your resultant image\n        canvas.width = imageSize.x;\n        canvas.height = imageSize.y;\n\n        // Draw just the portion of the whole map image that contains\n        // your feature to the canvas\n        // from https://stackoverflow.com/questions/26015497/how-to-resize-then-crop-an-image-with-canvas\n        ctx.drawImage(\n          img,\n          topLeft.x,\n          topLeft.y,\n          imageSize.x,\n          imageSize.y,\n          0,\n          0,\n          imageSize.x,\n          imageSize.y\n        );\n\n        // Create URL for resultant png\n        var imageurl = canvas.toDataURL(\"image/png\");\n        console.log(imageurl);\n\n        const resultantImage = new Image();\n        resultantImage.style = \"border: 1px solid black\";\n        resultantImage.src = imageurl;\n        const generative = document.querySelector('.generative');\n        generative.appendChild(canvas);\n        canvas.toBlob(function (blob) {\n          // saveAs function installed as part of leaflet snapshot package\n          console.log(blob);\n\n          let reader = new FileReader();\n        reader.readAsDataURL(blob);\n        reader.onloadend = function () {\n        let base64String = reader.result;\n\n        const button = document.getElementById(\"snapshot-button\");\n        button.disabled = true;\n        button.innerHTML = \"Generating...\";\n          fetch('/upload', {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({ \"image\": base64String })\n          })\n          .then(response => response.json())\n          .then(data => { \n            \n            let para = document.createElement(\"p\");\n            para.innerHTML = data[\"caption_V3\"];\n            let br = document.createElement(\"br\");\n            generative.appendChild(para);\n            generative.appendChild(br);\n            button.disabled = false;\n            button.innerHTML = \"Caption this\";\n          })\n          .catch((error) => {\n            console.error('Error:', error);\n          });\n          const check = document.getElementById(\"alternate\").checked;\n\n          if(check){\n          fetch('/upload2', {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({ \"image\": base64String })\n          })\n          .then(response => response.json())\n          .then(data => { \n            \n            let para = document.createElement(\"p\");\n            para.innerHTML = data[\"caption_V3\"];\n            let br = document.createElement(\"br\");\n            generative.appendChild(para);\n            generative.appendChild(br);\n            button.disabled = false;\n            button.innerHTML = \"Caption this\";\n          })\n          .catch((error) => {\n            console.error('Error:', error);\n          });\n        }\n        }\n        });\n      };\n\n      // set the image source to what the snapshotter captured\n      // img.onload will fire AFTER this\n      img.src = image;\n    })\n    .catch((e) => {\n      alert(e.toString());\n    });\n};\n\n// Add takescreenshot function to button\nconst button = document.getElementById(\"snapshot-button\");\nbutton.addEventListener(\"click\", takeScreenShot);\n"]}